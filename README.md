# BattleRoyale Plugin

이 플러그인은 마인크래프트 서버에서 배틀로얄 게임을 플레이할 수 있도록 다양한 기능과 명령어를 제공합니다.

## 명령어

### 팀 관리 명령어 (`/brteam`)

배틀로얄 게임을 위한 팀을 관리합니다.

*   **`/brteam create <팀이름>`**: 새로운 커스텀 팀을 생성합니다.
    *   예시: `/brteam create MyTeam`
*   **`/brteam add <팀이름> <플레이어이름>`**: 지정된 플레이어를 커스텀 팀에 추가합니다.
    *   예시: `/brteam add MyTeam Player1`
*   **`/brteam remove <팀이름> <플레이어이름>`**: 지정된 플레이어를 커스텀 팀에서 제거합니다.
    *   예시: `/brteam remove MyTeam Player1`
*   **`/brteam delete <팀이름>`**: 커스텀 팀을 삭제합니다.
    *   예시: `/brteam delete MyTeam`
*   **`/brteam list`**: 현재 생성된 모든 커스텀 팀과 팀원 목록을 보여줍니다.

### 게임 시작 명령어 (`/br`)

배틀로얄 게임을 시작합니다.

*   **`/br startdefault <팀_개수>`**: 플레이어를 자동으로 팀으로 나누어 배틀로얄 게임을 시작합니다.
    *   예시: `/br startdefault 4` (4개의 팀으로 게임 시작)
*   **`/br startim <팀_개수>`**: 미리 정의된 팀(또는 수동으로 설정된 팀)으로 배틀로얄 게임을 시작합니다.
    *   예시: `/br startim 2` (2개의 팀으로 게임 시작)

### 유틸리티 명령어

*   **`/chd` 또는 `/총`**: 플레이어에게 총기 작업대 아이템을 지급합니다.
*   **`/기본템설정`**: 게임 시작 시 플레이어에게 지급될 기본 아이템을 설정하는 인벤토리를 엽니다.
*   **`/기본템` 또는 `/rlqhsxpa`**: 설정된 기본 아이템을 플레이어에게 지급합니다.
*   **`/teamtest`**: 테스트 목적으로 플레이어를 2개의 팀으로 나눕니다.
*   **`/팀가르기 <팀_개수>`**: 모든 온라인 플레이어(관전자 제외)를 지정된 수의 팀으로 나눕니다.
    *   예시: `/팀가르기 3` (3개의 팀으로 플레이어 분할)
*   **`/팀참여 <팀_번호>`**: 플레이어가 지정된 팀 번호에 참여합니다.
    *   예시: `/팀참여 1` (1번 팀에 참여)
*   **`/suplytest`**: 현재 자기장 내 무작위 위치에 보급품을 소환합니다.
*   **`/밥`**: 플레이어에게 빵 64개를 지급합니다.
*   **`/강제종료`**: 서버를 강제로 종료합니다. (OP 권한 필요)
*   **`/top` 또는 `/탑`**: 플레이어를 현재 X, Z 좌표에서 가장 높은 블록 위로 순간이동시킵니다.

## 게임 시스템 및 기능

### 1. 팀 시스템

*   **자동 팀 분할**: 게임 시작 시 온라인 플레이어를 지정된 수의 팀으로 자동으로 나눕니다.
*   **커스텀 팀**: `/brteam` 명령어를 통해 팀을 생성하고 플레이어를 추가/제거할 수 있습니다.
*   **팀 전멸 감지**: 팀원 전원이 사망하거나 게임 중 서버를 떠나면 해당 팀은 전멸로 처리됩니다.
*   **팀 스폰**: 게임 시작 시 각 팀은 자기장 내 특정 위치로 순간이동됩니다.
*   **플레이어 초기화**: 게임 시작 시 플레이어의 인벤토리가 초기화되고, 최대 체력이 40으로 설정되며, 레벨이 180으로 설정됩니다.
*   **버프 지급**: 게임 시작 시 플레이어에게 야간 투시(Night Vision) 및 피해 저항(Damage Resistance) 효과가 부여됩니다.

### 2. 자기장 시스템 (월드 보더)

*   **단계별 자기장 축소**: 게임이 진행됨에 따라 월드 보더(자기장)가 여러 단계에 걸쳐 점진적으로 축소됩니다.
*   **설정 가능**: `config.yml` 파일을 통해 자기장 크기, 축소 대기 시간, 축소 속도 등을 설정할 수 있습니다.
*   **무작위 중심**: 다음 자기장의 중심은 현재 자기장 내에서 무작위로 결정됩니다.
*   **보스바 및 액션바**:
    *   플레이어의 보스바에 현재 자기장 정보(크기, 다음 중심, 축소까지 남은 시간)가 표시됩니다.
    *   나침반을 들고 있을 때는 자기장 중심까지의 거리와 자기장 밖 여부를 표시합니다.
    *   시계를 들고 있을 때는 다음 보급품 드롭까지 남은 시간을 표시합니다.
    *   자기장 축소 중에는 액션바를 통해 진행률과 경고 메시지가 표시됩니다.
*   **게임 종료**: 자기장이 축소되면서 최종적으로 한 팀만 남거나 모든 팀이 전멸하면 게임이 종료됩니다. 게임 종료 시 모든 플레이어는 자기장 중심으로 이동하고 상태가 초기화됩니다.

### 3. 보급품 시스템

*   **정기적 드롭**: `config.yml`에 설정된 간격(분 단위)으로 자기장 내 무작위 위치에 보급품 상자가 소환됩니다.
*   **설정 가능한 아이템**: `config.yml`을 통해 보급품 상자에 포함될 아이템 목록을 설정할 수 있습니다.
*   **나침반 연동**: 시계를 들고 있을 때 보스바를 통해 다음 보급품 드롭까지 남은 시간을 확인할 수 있습니다.

### 4. 유틸리티 및 이벤트 처리

*   **커스텀 블록 드롭**:
    *   철광석, 금광석, 구리광석, 청금석광석, 레드스톤광석, 다이아몬드광석, 에메랄드광석, 석탄광석을 부수면 기존 드롭 대신 가공된 아이템(예: 철광석 -> 철 주괴)이 드롭됩니다.
    *   모래를 부수면 유리와 함께 20% 확률로 자수정 조각이 드롭됩니다.
*   **제작 제한**: 특정 아이템(인챈트 황금 사과, 엔드 수정, 리스폰 앵커, 불사의 토템, 물약, 화살, 침대)은 제작할 수 없습니다.
*   **피해량 감소**: 플레이어가 엔티티 공격이나 투사체 공격이 아닌 다른 원인(예: 낙하 피해, 용암 피해)으로 피해를 입을 경우, 피해량이 절반으로 감소합니다.
*   **플레이어 사망 처리**:
    *   플레이어가 사망하면 사망 메시지가 방송되고, 해당 플레이어는 사망자 목록에 추가됩니다.
    *   사망한 플레이어는 리스폰 시 관전자 모드로 전환됩니다.
    *   플레이어 사망 시 해당 플레이어가 속한 팀의 전멸 여부를 확인합니다.
*   **엔티티 사망 시 드롭**: 플레이어가 아닌 엔티티가 사망하면 일정 확률로 화약이 드롭됩니다.
*   **기본 아이템 설정 저장**: `/기본템설정` 명령어로 연 인벤토리를 닫으면 설정된 아이템 목록이 저장됩니다.

## 설정 (`config.yml` 예시)

플러그인의 동작을 세부적으로 설정할 수 있습니다.

```yaml
# 기본 아이템 설정 (아이템명:수량:인챈트명=레벨,인챈트명=레벨)
default_items:
  - DIAMOND_SWORD:1:SHARPNESS=5,UNBREAKING=3
  - BOW:1:POWER=4,INFINITY=1
  - ARROW:64
  - COOKED_BEEF:32
  - GOLDEN_APPLE:5

border:
  sizes: [2500.0, 2000.0, 1500.0, 1000.0, 500.0, 250.0, 100.0, 50.0] # 자기장 각 단계별 크기
  countdown_times: [300, 240, 180, 120, 90, 60, 30] # 각 자기장 축소 전 대기 시간 (초)
  speed: [1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0] # 자기장 축소 속도 (블록/초)

supply_drop:
  interval_minutes: 4 # 보급품 드롭 간격 (분)
  items: # 보급품 상자에 포함될 아이템 목록 (아이템명:최소수량-최대수량:인챈트명=레벨)
    - DIAMOND_CHESTPLATE:1:PROTECTION=4
    - DIAMOND_LEGGINGS:1:PROTECTION=4
    - DIAMOND_BOOTS:1:PROTECTION=4
    - DIAMOND_HELMET:1:PROTECTION=4
    - ENDER_PEARL:4-8
    - SPLASH_POTION:1-2:HEALING=2
    - TNT:5-10
```

---
